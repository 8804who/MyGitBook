### 프로세스
- 실행 중인 프로그램
- 포그라운드 프로세스(foreground process): 사용자가 볼 수 있는 공간에서 실행되는 프로세스
- 백그라운드 프로세스(backgroudn process): 사용자가 볼 수 없는 공간에서 실행되는 프로세스
- 프로세스의 메모리 영역
  - 프로세스는 커널 영역과 사용자 영역에 나뉘어 저장
- 문맥 교환(context switch)
  - 한 프로세스에서 다른 프로세스로 실행순서가 넘어갈 때 발생
  - 기존에 실행되던 프로세스 중간 정보(문맥)를 백업
  - 문맥을 백업해놓았다가 다음 차례에 실행을 재개하기 위해 활용
  - 새로운 프로세스 실행을 위해 문맥을 복구하는 과정

### 프로세스 제어 블록(PCB)
  - PCB는 커널 영역에 저장
  - 모든 프로세스는 실행을 위해 CPU가 필요하지만 CPU 자원은 한정적
  - 프로세스들은 돌아가며 한정된 시간 만큼 CPU 이용
  - 번갈아 수행하는 프로세스들을 관리하기 위해 사용하는 자료구조
  - 프로세스 관련 정보를 저장
  - 프로세스 생성 시 커널 영역에 생성되고 종료 시에 폐기됨
- 프로세스 제어 블록에 저장되는 대표적인 정보
  - 프로세스 ID(PID): 특정 프로세스를 식별하기 위해 부여하는 고유한 번호
  - 레지스터 값: 프로세스는 자신의 차례가 되면 이전까지 사용한 레지스터 중간 값(프로그램 카운터, 스택 포인터 등등)을 모두 복원 -> 실행 재개
  - 프로세스 상태: 프로세스의 현재 상태(대기 상태, 실행 상태, 준비 상태 등등)
  - CPU 스케줄링 정보: 프로세스가 언제 어떤 순서로 CPU를 할당받을지에 대한 정보
  - 메모리 정보: 프로세스가 어느 주소에 저장되어 있는지에 대한 정보, 페이지 테이블 정보
  - 사용한 파일과 입출력장치 정보: 할당된 입출력장치, 사용 중인 파일 정보

### 사용자 영역에서의 프로세스
  - 크게 코드 영역(텍스트 영역), 데이터 영역, 힙 영역, 스택 영역이 있음
  - 힙 영역과 스택 영역의 크기는 가변적
    - 일반적으로 힙 영역은 낮은 주소 -> 높은 주소로 할당
    - 일반적으로 스택 영역은 높은 주소 -> 낮은 주소로 할당
  - 코드 영역
    - 실행할 수 있는 코드나 기계어로 이루어진 명령어를 저장
    - 데이터가 아닌 명령어가 저장되는 곳이라 쓰기 불가(읽기 전용)
  - 데이터 영역
    - 잠깐 쓰고 삭제할 데이터가 아닌 프로그램이 실행되는 동안 유지할 데이터를 저장
    - ex. 전역 변수
  - 힙 영역
    - 사용자가 직접 할당할 수 있는 저장공간
  - 스택 영역
    - 데이터가 일시적으로 저장되는 공간
    - 데이터 영역과의 차이는 일시적으로 사용할 데이터냐, 실행 기간 내내 사용할 데이터냐
    - ex. 매개 변수, 지역 변수

### 프로세스 상태
- 생성 상태
  - 이제 막 메모리에 적재되어 PCB를 할당 받은 상태
  - 준비가 완료되면 준비 상태로 전환
- 준비 상태
  - CPU를 할당 받으면 실행 가능한 상태
  - 자신의 차례를 기다리고 있는 상태
  - 자신의 차례가 되면 실행 상태로 전환(디스패치) 
- 실행 상태
  - CPU를 할당 받아 실행 중인 상태
  - 할당된 시간 모두 사용 시 준비 상태로 전환
  - 실행 도중 입출력 장치 사용 시 입출력 작업 끝날 때까지 대기 상태로 전환
- 대기 상태
  - 프로세스가 실행 도중 입출력 장치를 사용하는 상태
  - 입출력 작업은 CPU에 비해 느리므로 대기 상태로 전환
  - 입출력 작업이 끝나면 준비 상태로 전환
- 종료 상태
  - 프로세스가 종료된 상태
  - PCB, 프로세스의 메모리 영역을 정리
  
### 프로세스 계층 구조
- 프로세스 실행 도중 다른 프로세스 생성 가능
- 부모 프로세스: 새 프로세스를 생성한 프로세스
- 자식 프로세스: 부모 프로세스에 의해 생성된 프로세스
- 부모 프로세스와 자식 프로세스는 별개의 프로세스로 각기 다른 PID를 가짐
- 자식 프로세스가 자식 프로세스를 낳을 수 있고 이렇게 프로세스의 계층 구조 형성
- 프로세스 생성 기법
  - 부모 프로세스는 **fork** 호출을 통해 자신의 복사본을 자식 프로세스로 생성
  - 자식 프로세스는 **exec** 호출을 통해 자신의 메모리 공간을 다른 프로그램으로 교체
  - fork
    - 복사본(자식 프로세스) 생성
    - 부모 프레서의 자원을 상속
  - exec
    - 메모리 공간을 새로운 프로그램으로 덮어쓰기
    - 콛/데이터 영역은 실행할 프로그램 내용으로 바뀌고 나머지 영역은 초기화
  - 따라서 부모 프로세스와 동일한 자식 프로세스를 생성한 후 자식 프로세스의 내용을 변경하는 방식

### 스레드
- 프로세스를 구성하는 실행 흐름의 단위
- 하나의 프로세스는 여러 개의 스레드를 가질 수 있음
- 단일 스레드 프로세스
  - 스레드가 하나인 프로세스
- 멀티 스레드 프로세스
  - 스레드가 여러개인 프로세스
  - 프로세스를 이루는 여러 명령어를 동시에 실행 가능
  - 모든 스레드는 프로세스의 자원을 공유
- 스레드의 구성 요소
  - 스레드 ID, 프로그램 카운터 같은 레지스터 값, 스택 등
  - 실행에 필요한 최소한의 정보
- 멀티 프로세스와 멀티 스레드
  - 여러 개의 프로세스(멀티 프로세스)를 실행하는 것과 한 프로세스에서 여러 스레드(멀티 스레드)를 실행하는 것에는 차이가 존재
  - 멀티 프로세스는 서로 자원을 공유하지 않고 독립적으로 실행
  - 멀티 스레드는 프로세스의 자원을 공유하므로 협력과 통신에 유리
  - 멀티 스레드는 자원을 공유하므로 하나의 스레드에 문제가 생기면 다른 스레드에도 문제가 생길 수 있음
  - 프로세스 간에도 프로세스 간 통신(IPC)를 통해 자원을 주고 받을 수 있지만 멀티 스레드보다는 제약이 있음