### HTTP
- 요청-응답 기반 프로토콜
  - 클라이언트-서버 구조 기반 요청-응답 프로토콜
- 미디어 독립적 프로토콜
  - HTTP가 요청하는 대상은 자원
  - HTTP는 자원의 특성을 제한하지 않고 자원과 상호작용하는 데 필요한 인터페이스만 정의
  - HTML, JPEG, PNG, JSON 등 다양한 종류 자원 송수신 가능
  - 미디어 타입
    - HTTP에서 메시지로 주고 받는 자원의 종류
    - 웹에서의 확장자
    - '/'를 기준으로 '타입/서브타입' 형식
      - 타입: 데이터 유형
      - 서브타입: 주어진 타입에 대한 세부 유형
    - 부가적인 설명을 위해 선택적으로 매개변수 포함 가능
- HTTP는 주고 받을 미디어 타입에 제한을 두지 않고 동작하는 미디어 독립적 프로토콜
- Stateless 프로토콜
  - HTTP는 상태를 유지하지 않음
  - 서버가 HTTP 요청을 보낸 클라이언트와 관련된 상태를 기억하지 않음
  - 클라이언트의 모든 요청은 기본적으로 독립적인 요청으로 간주
  - HTTP가 상태를 유지하지 않는 이유
    - HTTP 서버는 일반적으로 많은 클라이언트와 동시에 상호 작용
    - 모든 클라이언트의 상태 정보를 유지하면 서버에 부담
    - 특정 클라이언트가 특정 서버에 종속되는 상황 방지
    - 만약 HTTP가 Stateful하면 클라이언트는 자신의 상태를 기억하는 서버와만 통신
    - 위의 특성으로 확장성과 견고성에 유리
- 지속 연결 지원 프로토콜
  - 비지속 연결
    - HTTP 초기 버전
    - TCP 연결 수립 후 요청에 대한 응답을 받으면 연결 종료
    - 추가적인 요청-응답을 위해서는 다시 TCP 연결 수립부터 반복
  - 지속 연결
    - 최근 사용되는 HTTP 버전
    - 하나의 TCP 연결에서 여러 개의 요청-응답을 주고 받을 수 있음

### HTTP 메시지 구조
- 시작 라인, 필드 라인, 메시지 본문으로 구성
- 시작 라인
  - HTTP 메시지는 요청 메시지일 수도 있고, 응답 메시지일 수도 있음
  - 요청 메시지일 경우 시작 라인 = '요청 라인'
    - 요청 라인 = 메서드 (공백) 요청 대상 (공백) HTTP 버전 (줄바꿈)
    - 메서드
      - 클라이언트가 서버의 자원에 대해 수행할 작업의 종류
      - 대표적으로 GET, POST, PUT, DELETE
    - 요청대상
      - 요청을 보낼 서버의 자원
      - 보통 URI 경로가 명시
  - 응답 메시지일 경우 시작 라인 = '상태 라인'
    - 상태 라인 = HTTP 버전 (공백) 상태 코드 (공백) 이유 구문 (줄바꿈)
    - 상태코드
      - 요청에 대한 결과를 나타내는 세 자리 정수
    - 이유 구문
      - 상태 코드에 대한 문자열 형태의 설명
      - 선택적 파라미터로 없을 수도 있음
- 필드라인
  - 필드 라인은 없을 수도 있고 여러개 있을 수도 있음
  - 0개 이상의 HTTP 헤더 명시
  - HTTP 헤더: HTTP 통신에 필요한 부가 정보
  - ':'을 기준으로 헤더 이름과 하나 이상의 헤더값으로 구성
- 메시지 본문
  - 메시지 본문은 없을 수도 있음
  - HTTP 요청 혹은 응답 메시지에서 본문이 필요할 경우 선택적으로 메시지 본문에 명시
  - 다양한 콘텐츠 타입 사용 가능
- 필드 라인과 메시지 본문 사이에는 빈 줄바꿈 존재
  
  ### HTTP 메서드
  - GET
    - 자원을 습득하기 위한 메서드
    - 요청 메시지로 자원을 요청
    - 요청 메시지가 성공적으로 처리되면 응답 메시지로 요청한 자원을 전달 받음
  - HEAD
    - GET과 동일하나, 헤더만을 응답받는 메서드
  - POST
    - 서버로 하여금 특정 작업을 처리하게끔 하는 메서드
    - 처리할 대상은 흔히 메시지 본문으로 명시
    - 보통 클라이언트가 서버에 새로운 자원을 생성하고자 할 때 사용
    - 요청 자원이 없으면 자원을 새롭게 생성
    - 요청 자원이 존재하면 자원을 대체
  - PUT
    - 자원을 대체하기 위한 메서드
  - PATCH
    - 자원에 대한 부분적 수정을 위한 메서드
  - DELETE
    - 자원을 삭제하기 위한 메서드
  - CONNECT
    - 자원에 대한 양방향 연결을 시작하는 메서드
  - OPTIONS
    - 사용 가능한 메서드 등 통신 옵션을 확인하는 메서드
  - TRACE
    - 자원에 대한 루프백 테스트를 수행하는 메서드

### HTTP 상태코드
- 요청에 대한 결과를 나타내는 세 자리 정수
- 100번대
  - 정보성 상태코드
- 200번대
  - 성공 상태 코드
  - 200(OK)
    - 요청 성공
  - 201(Created)
    - 요청 성공
    - 새로운 자원 생성
  - 202(Accepted)
    - 요청을 받았지만 작업이 끝나지 않음
  - 204(No Content)
    - 요청이 성공했지만 메시지 본문으로 표시할 데이터 없음
- 300번대
  - 리다이렉션 상태 코드
  - 리다이렉션
    - 요청을 완수하기 위해 추가적인 조치가 필요한 상태
    - 클라이언트가 요청한 자원이 다른 곳에 있을 때, 클라이언트의 요청을 다른 곳으로 이동시키는 것
  - 영구적 리다이렉션
    - 자원이 완전히 새로운 곳으로 이동하여 경로가 영구적으로 재지정
    - 기존 URL에 요청 메시지를 보내면 항상 새로운 URL로 리다이렉트
  - 일시적 리다이렉션
    - 자원 위치가 임시로 변경되었거나 임시로 사용할 URL이 필요한 경우 주로 사용
    - 어떤 URL에 대해 일시적 리다이렉션 관련 상태 코드를 응답받으면 요청을 보낸 URL은 기억 
  - 301(Moved Permanetly)
    - 영구적 리다이렉션
    - 재용청 메서드 변경될 수 있음
  - 302(Found)
    - 일시적 리다이렉션
    - 재요청 메서드 변경될 수 있음
  - 303(See Other)
    - 일시적 리다이렉션
    - 재요청 메서드 GET으로 변경
  - 307(Temporary Redirect)
    - 일시적 리다이렉션
    - 재요청 메서드 변경되지 않음
  - 308(Permenant Redirect)
    - 영구적 리다이렉션
    - 재요청 메서드 변경되지 않음
- 400번대
  - 클라이언트 에러 상태 코드
  - 인증 & 권한 부여
    - 인증: 요청자가 누구인지
    - 권한 부여: 요청자가 어떤 권한을 가지고 있는지
  - 400(Bad Request)
    - 클라이언트의 요청이 잘못됨
  - 401(Unauthorized)
    - 요청한 자원에 대한 유효한 인증 없음
  - 403(Forbidden)
    - 요청이 서버에 의해 거부
  - 404(Not Found)
    - 요청받은 자원을 찾을 수 없음
  - 405(Method Not Allowed)
    - 요청한 메서드를 지원하지 않음
- 500번대
  - 서버 에러 상태 코드
  - 500(Internal Server Error)
    - 요청을 처리할 수 없음
  - 502(Bad Gateway)
    - 중간 서버의 통신 오류
  - 503(Service Unavailable)
    - 현재는 요청을 처리할 수 없으나 추후 가능할 수도 있음

### HTTP 헤더
- 필드 이름(헤더 이름)과 필드 값(헤더 값)이 ':'을 기준으로 구분
- 헤더 유형
  - 특별한 사전 지식이 필요없는 헤더
  - 사전 지식이 필요헌 헤더: 캐시, 쿠키, 콘텐츠 협상 관련 헤더
- 요청 시 자주 사용되는 헤더
  - HOST
    - 요청을 보낼 호스트를 나타내는 헤더
    - 주로 도메인 네임 명시, 포트 번호 포함
  - User-Agent
    - HTTP 요청을 시작하는 클라이언트 측의 프로그램
    - User-Agent 헤더에는 요청 메시지 생성에 관여한 클라이언트 프로그램과 관련된 다양한 정보 명시
  - Referer
    - 클라이언트가 요청을 보낼 때 머무르고 있던 URL 명시
    - 클라이언트 유입 경로 파악
  - Authorization
    - 클라이언트의 인증 정보를 담는 헤더
    - 인증 타입과 인증을 위한 정보 명시
    - 인증 타입에 따라 은증 정보 값이 달라짐
    - HTTP 인증 타입
      - Basic
        - 가장 기본적인 인증 타입
        - username:password를 Base 64 인코딩하여 인증 정보로 사용
- 응답 시 자주 사용되는 헤더
  - Server
    - 요청을 처리하는 서버 측의 소프트웨어와 관련된 정보 명시
  - Allow
    - 클라이언트에게 허용된 HTTP 메서드 목록을 알려 주기 위해 사용
    - 상태 코드 405를 응답하는 메시지에서 Allow 헤더가 함께 사용
  - Retry-After
    - 상태 코드 503과 함께 사용될 수 있는 헤더
    - 자원을 사용할 수 있는 날짜 혹은 시각을 명시
  - Location
    - 클라이언트에게 자원의 위치를 알려 주기 위해 사용
    - 주로 리다이렉션이나 새로운 자원 생성 시 사용
  - WWW-Authenticate
    - 상태코드 401과 함께 사용되는 헤더
    - 자원에 접근하기 위한 인증 방식 설명
- 요청과 응답 모두에서 활용되는 헤더
  - Date
    - 메시지가 생성된 날짜와 시각에 관련된 정보를 담은 헤더
  - Connection
    - 클라이언트의 요청과 응답 간의 연결 방식을 설정하는 헤더
    - 지속 연결이 Connection에 명시되는 대표적인 연결 방식
  - Content-Length
    - 본문의 바이트 단위 크기
  - Content-Type, Content-Language, Content-Encoding
    - 메시지 본문의 표현 방식을 설명하는 헤더
    - 표현 헤더의 일종
    - Content-Type: 메시지 본문에서 사용된 미디어 타입
    - Content-Language: 메시지 본문에 사용된 자연어 명시
    - Content-Encoding" 메시지 본문을 압축하거나 변환한 방식(인코딩 방식)

### HTTP 버전 별 특징
- HTTP/0.9
  - 초창기 HTTP 버전
  - 사용 가능한 메서드: GET
  - 헤더 지원 X
- HTTP/1.0
  - HEAD, POST 등의 메서드 도입
  - 헤더 지원 시작
  - 공식적으로는 지속 연결 X
- HTTP/1.1
  - 현재도 자주 사용
  - 지속 연결 공식 지원
  - 파이프라이닝, 콘첸츠 협상 등  다양한 편의 기능 추가
  - 메시지 본문 = 평문
  - HOL 블로킹
    - 같은 큐에 대기하며 순차적으로 처리되는 여러 패킷이 있을 경우 첫 번째 패킷의 처리 지연으로 인해 나머지 패킷 처리도 모두 지연되는 문제
- HTTP/2.0
  - 현재 자주 사용
  - HTTP/1.1의 효율과 성능을 높인 버전
  - 메시지 본문 = 바이너리 데이터
  - 헤더 압축 전송 기능
  - 서버 푸시 기능
    - 클라이언트가 요청하지 않아도 미래에 필요할 것으로 예상되는 자원 미리 전송
  - HTTP멀티플랙싱
    - HOL 블로킹을 완화
    - 여러 스트림을 활용해 병렬적으로 메시지 교환
    - 요청-응답 단위는 하나의 스트림에서 수행
    - 스트림별 독립적 송수신
    - 별도의 스트림을 통해 여러 데이터를 병렬적으로 교환하며 HOL 블로킹 완화
- HTTP/3.0
  - 점차 사용이 확대되는 중
  - UDP 기반 프로토콜인 QUIC 기반으로 동작
  - 비연결형 프로토콜 기반으로 빠른 송수신 가능